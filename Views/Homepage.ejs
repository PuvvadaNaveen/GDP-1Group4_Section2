<% include header %>

<head>

  <link rel="stylesheet" type="text/css" href="/css/Homepage.css" />
  <script src="/js/Test.js"></script>
  <script src="/js/Test.js"></script>
  <script src="../main.js"></script>

</head>


<body>
  <div class="container-fluid">


    <h1>Performers Details</h1>
    <br>
    <table class="table" id="pull">
      <thead>
        <tr>
            <form action="/FormController/sort" method="POST">
              <!-- <input type="text" name="firstname" hidden value="firstname"> -->
              <input type="text" name="firstname" hidden value="firstname">
               <th><button class="btn btn-primary" type="submit">First Name</button></th>
            </form>
            <form action="/FormController/sort" method="POST">
              <!-- <input type="text" name="firstname" hidden value="firstname"> -->
              <!-- <input type="text" name="lastname" value="lastname"> -->
              <input type="text" name="lastname" hidden value="lastname">
               <th><button class="btn btn-primary" type="submit">Last Name</button></th>
            </form>
          <th>Play</th>
          <th>Character Name</th>
          <th>Clothing Item</th>
          <th>Color</th>

          <th>Measurements</th>
          <th>Date</th>
          <% if(user && user.isAdmin) { %>
          <th>Employee Assigned</th>
          <% } %>
          <th>Notes</th>

        </tr>
      </thead>
      <tbody>
        <% var mes = []%>
        <% var updateVairable = ""%>
        <% for( i = 0; i < listOfPerformers.length; i++) { %>
        <tr>
          <td>
            <%= listOfPerformers[i].firstname %>
          </td>
          <td>
            <%= listOfPerformers[i].lastname %>
          </td>
          <td>
            <%= listOfPerformers[i].playname %>
          </td>
          <td>
            <%= listOfPerformers[i].charactername %>
          </td>



          <td>
              <% if (cloth[i] == null){%>
              <button id="selectItem<%= listOfPerformers[i]._id %>" type="button" class="btn btn-primary" data-toggle="modal"
                  data-target="#myModal2<%= listOfPerformers[i]._id %>">Choose Item</button>
                  <%}%>
                  <% if (cloth[i] != null){%>
            <button id="selectItem<%= listOfPerformers[i]._id %>" type="button" class="btn btn-primary" data-toggle="modal"
              data-target="#myModal2<%= listOfPerformers[i]._id %>"><%=cloth[i].selectCloth%></button>
              <%}%>
            <div id="myModal2<%= listOfPerformers[i]._id %>" class="modal fade" role="dialog">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">

                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Choose Clothing Item</h4>
                  </div>
                  <div class="modal-body">
                    <form id="clothIdddd" method="POST" action="/FormController/cloth01">
                      <select id="mySelect1<%= listOfPerformers[i]._id %>" size="4" onclick="selectItem('<%= listOfPerformers[i]._id %>')">
                        <option>Tunic</option>
                        <option>Skirt</option>
                        <option>Suit</option>
                        <option>Trousers</option>
                        <% if (cloth[i] == null){%>
                        <%cloth[i] = cloth1%>
                        <%}%>
                        <input type="text" name="clothselect" value="<%=cloth[i]._id%>" hidden>
                        <input id="cloth<%= listOfPerformers[i]._id %>" type="text" name="selectCloth" hidden>
                        <input type="text" name="clothID" value="<%= listOfPerformers[i]._id %>" hidden>
                      </select>
                      <br>
                      <br>
                      <button onclick="myFunction1('<%=listOfPerformers[i]._id%>')" type="submit" class="btn btn-primary">Submit</button>
                    </form>
                  </div>
                </div>

              </div>
            </div>
          </td>

          <td>
              <% if (item[i] == null){%>
              <button id="selectColor<%= listOfPerformers[i]._id %>" type="button" class="btn btn-primary" data-toggle="modal"
                  data-target="#myModal3<%= listOfPerformers[i]._id %>">Choose Color</button>
                  <%}%>
                  <% if (item[i] != null){%>
            <button id="selectColor<%= listOfPerformers[i]._id %>" type="button" class="btn btn-primary" data-toggle="modal"
              data-target="#myModal3<%= listOfPerformers[i]._id %>"><%=item[i].selectColor01%></button>
              <%}%>
            <div id="myModal3<%= listOfPerformers[i]._id %>" class="modal fade" role="dialog">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                  </div>
                  <div class="modal-body">
                    <form method="POST" action="/FormController/clr01">
                      <select id="mySelect2<%= listOfPerformers[i]._id %>" size="5" onchange="selColor('<%= listOfPerformers[i]._id %>')">
                        <option>black</option>
                        <option>white</option>
                        <option>cream</option>
                        <option>tan</option>
                        <option>brown</option>
                        <option>grey</option>
                        <option>red</option>
                        <option>orange</option>
                        <option>yellow</option>
                        <option>green</option>
                        <option>blue</option>
                        <option>purple</option>
                        <option>pink</option>
                        <option>lavender</option>
                        <option>dark</option>
                        <option>light</option>
                        <option>pale</option>
                        <option>distressed</option>
                        <option>old</option>
                        <% if (item[i] == null){%>
                        <%item[i] = item1%>
                        <%}%>
                        <input type="text" name="itemId" value="<%=item[i]._id%>" hidden>
                        <input id="clr<%= listOfPerformers[i]._id %>" type="text" name="selectColor01" hidden>
                        <input type="text" name="colorID" value="<%= listOfPerformers[i]._id %>" hidden>
                      </select>
                      <br>
                      <br>
                      <button onclick="myFunction2('<%= listOfPerformers[i]._id %>')" type="submit" class="btn btn-primary">Submit</button>
                    </form>

                  </div>
                </div>

              </div>
            </div>
          </td>

          <td>
            <% include measurements %>
  </td>
  <td>
    <%= listOfPerformers[i].playdate %>
  </td>
  <% if(user && user.isAdmin) { %>
  <td>
      <% if (empl[i] == null){%>
      <button id="selectEmployee<%= listOfPerformers[i]._id %>" type="button" class="btn btn-primary" data-toggle="modal"
          data-target="#myModal1<%= listOfPerformers[i]._id %>">Select Employee</button>
          <%}%>
          <% if (empl[i] != null){%>
    <button id="selectEmployee<%= listOfPerformers[i]._id %>" type="button" class="btn btn-primary" data-toggle="modal"
      data-target="#myModal1<%= listOfPerformers[i]._id %>"><%=empl[i].selectEmployee1%></button>
      <%}%>
    <div id="myModal1<%= listOfPerformers[i]._id %>" class="modal fade" role="dialog">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Employees</h4>
          </div>
          <div class="modal-body">
            <form method="POST" action="/FormController/emp01">
              <select id="mySelect<%= listOfPerformers[i]._id %>" size="5" onchange="myfunctionEmp('<%= listOfPerformers[i]._id %>')">
                <option>Akhil</option>
                <option>Meghana</option>
                <option>Naveen</option>
                <option>Shiva</option>
                <option>Siva</option>
                <br>
                <% if (empl[i] == null){%>
                  <%empl[i] = empl1%>
                  <%}%>
                  <input type="text" name="employeeId" value="<%=empl[i]._id%>" hidden>
                <input id="emp<%= listOfPerformers[i]._id %>" type="text" name="selectEmployee1" hidden>
                <input type="text" name="empID" value="<%= listOfPerformers[i]._id %>" hidden>
              </select>
              <br>
              <br>
              <button class="btn btn-primary" onclick="myFunction('<%= listOfPerformers[i]._id %>')" type="submit">Submit</button>
            </form>

          </div>
        </div>

      </div>
    </div>
    <!-- <select>
              <option>Select Employee</option>
              <option>Akhil</option>
              <option>Meghana</option>
              <option>Naveen</option>
              <option>Shiva</option>
              <option>Siva</option>
            </select> -->
  </td>
  <% } %>

  <% if(!user.isAdmin) { %>
    <td><textarea readonly></textarea></td>
    <% } %>

  <% if(user && user.isAdmin) { %>
  <td><textarea></textarea></td>
  <% } %>



  <% if(user && (user.isAdmin || user.isManager)) { %>
  <td>
    <form action="/FormController/edit" method="POST">
      <input type="text" name="perfId1" hidden value="<%= listOfPerformers[i]._id %>">
      <button class="btn btn-primary" type="submit">Basic Form</button>
    </form>
  </td>
  <% } %>
  <% if(user && user.isAdmin){ %>
  <td>
    <form onsubmit="return confirm('Are you sure want to delete?')" action="/FormController/delete" method="POST">
      <input type="text" name="perfId2" hidden value="<%= listOfPerformers[i]._id %>">
      <button class="btn btn-danger" type="submit">Delete</button>
    </form>
  </td>
  <!-- <td><button onclick="removeRow()">Delete</button> <%=i%></td> -->
  <!-- <td><button onclick="deletePerformer('<%= listOfPerformers[i]._id %>')">Delete</button> <%=i%></td> -->
  <% } %>

  </tr>
  <% } %>
  </tbody>
  </table>
  </div>
  <form action="/shop" method="get">


    <button class="button" type="submit" formaction="/shop">Generate shop pull list</button>
  </form>

</body>



</html>